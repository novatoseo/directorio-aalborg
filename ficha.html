<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css"><title>Cargando...</title>
</head>
<body>
    <div class="nav"><a href="index.html" style="text-decoration:none; color:var(--p)">‚Üê Directorio Aalborg</a></div>
    <div class="container" id="app"></div>

    <script>
        const name = new URLSearchParams(window.location.search).get('name');
        fetch('datos.json').then(r => r.json()).then(data => {
            const n = data.find(i => i.post_name === name);
            if(!n) return document.getElementById('app').innerHTML = "Negocio no encontrado";

            document.title = `${n.post_title} en ${n.by} | Opiniones y Contacto`;
            
            // Inyectar Schema para Google
            const schema = {
                "@context": "https://schema.org",
                "@type": "LocalBusiness",
                "name": n.post_title,
                "address": n.adresse,
                "telephone": n.telefon,
                "aggregateRating": {
                    "@type": "AggregateRating",
                    "ratingValue": n.bedoemmelse || 4,
                    "reviewCount": n.antal_anmeldelser || 10
                }
            };
            const script = document.createElement('script');
            script.type = "application/ld+json";
            script.text = JSON.stringify(schema);
            document.head.appendChild(script);

            document.getElementById('app').innerHTML = `
                <h1>${n.post_title}</h1>
                <div class="stars">‚≠ê ${n.bedoemmelse} (${n.antal_anmeldelser} rese√±as)</div>
                <div class="grid">
                    <div class="card">
                        <p><strong>üìç Direcci√≥n:</strong><br>${n.adresse}</p>
                        <p><strong>‚è∞ Horario:</strong><br>${n.aabningstider || 'Contactar para consultar'}</p>
                        ${n.telefon ? `<a href="tel:${n.telefon}" class="btn-call">üìû LLAMAR AL NEGOCIO</a>` : ''}
                    </div>
                </div>
                <div class="map-container">${n.maps_iframe.replace(/""/g, '"')}</div>
            `;
        });
    </script>
</body>
</html>