<!DOCTYPE html>
<html lang="da">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Virksomhed</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="nav-bar">
        <a href="index.html">Aalborg Directory</a>
    </div>

    <div class="container" id="app">Cargando datos...</div>

    <script>
        const name = new URLSearchParams(window.location.search).get('name');
        
        fetch('datos.json').then(r => r.json()).then(data => {
            const n = data.find(i => i.post_name === name);
            
            if(!n) {
                document.getElementById('app').innerHTML = "<h1>Virksomhed ikke fundet</h1><a href='index.html'>G√• hjem</a>";
                return;
            }

            document.title = `${n.post_title} - Aalborg`;

            // L√≥gica de Imagen: Si existe URL, mostramos la foto grande.
            const imagenPrincipal = n.billede_url 
                ? `<img src="${n.billede_url}" class="business-img" style="height: 300px; object-fit: cover;" alt="${n.post_title}">` 
                : '';

            // Limpieza del Iframe (quitamos comillas dobles extras del CSV)
            const mapClean = n.maps_iframe ? n.maps_iframe.replace(/""/g, '"') : '';

            document.getElementById('app').innerHTML = `
                ${imagenPrincipal}
                <span class="category-tag">${n.kategori}</span>
                <h1 style="font-size: 2.5rem; margin: 10px 0;">${n.post_title}</h1>
                
                <div class="rating" style="font-size: 1.2rem; margin-bottom: 20px;">
                    ‚òÖ ${n.bedoemmelse || ''} 
                    <span style="color:var(--text-sec);">baseret p√• ${n.antal_anmeldelser || 0} anmeldelser</span>
                </div>

                <div class="card" style="margin-top: 20px;">
                    <h3 style="border-bottom:1px solid #eee; padding-bottom:10px; margin-bottom:15px;">Info & Kontakt</h3>
                    <p><strong>üìç Adresse:</strong><br>${n.adresse}</p>
                    <p><strong>üìû Telefon:</strong><br>${n.telefon || 'Ikke tilg√¶ngelig'}</p>
                    <p><strong>üïí √Öbningstider:</strong><br>${n.aabningstider || 'Se p√• kortet'}</p>
                    
                    ${n.telefon ? `<a href="tel:${n.telefon}" class="btn-primary">üìû RING NU</a>` : ''}
                </div>

                ${mapClean}
            `;
        });
    </script>
</body>
</html>
