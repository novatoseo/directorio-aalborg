<!DOCTYPE html>
<html lang="da">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kategori | Aalborg</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="nav-bar">
        <a href="index.html">&larr; Tilbage til forsiden</a>
    </div>

    <div class="container">
        <h1 id="titulo-cat" style="font-size: 2rem; margin-bottom: 2rem;">Henter...</h1>
        <div id="lista-negocios" class="grid"></div>
    </div>

    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const cat = urlParams.get('cat');
        document.getElementById('titulo-cat').innerText = cat;

        fetch('datos.json')
            .then(r => r.json())
            .then(data => {
                const filtrados = data.filter(i => i.kategori === cat);
                
                document.getElementById('lista-negocios').innerHTML = filtrados.map(n => {
                    // Si hay imagen la ponemos, si no, no ponemos nada para no romper el dise√±o
                    const imgHTML = n.billede_url ? `<img src="${n.billede_url}" class="business-img" alt="${n.post_title}" loading="lazy">` : '';
                    
                    return `
                    <a href="ficha.html?name=${n.post_name}" class="card">
                        ${imgHTML}
                        <div class="category-tag">${n.kategori}</div>
                        <h3>${n.post_title}</h3>
                        <div class="rating">‚òÖ ${n.bedoemmelse || '-'} <span style="color:#999; font-weight:400;">(${n.antal_anmeldelser || 0} anmeldelser)</span></div>
                        <p class="meta-info" style="margin-top:auto; padding-top:15px;">üìç ${n.adresse ? n.adresse.split(',')[0] : 'Aalborg'}</p>
                    </a>
                `}).join('');
            });
    </script>
</body>
</html>
